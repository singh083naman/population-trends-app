(function(){"use strict";var e={732:function(e,t,r){var n=r(130),o=r(768);const a={id:"app"};function u(e,t,r,n,u,c){const s=(0,o.g2)("PrefectureList"),i=(0,o.g2)("PopulationGraph");return(0,o.uX)(),(0,o.CE)("div",a,[t[0]||(t[0]=(0,o.Lk)("h1",null,"Population Trends by Prefecture",-1)),(0,o.bF)(s,{onPrefectureSelected:e.handlePrefectureSelected},null,8,["onPrefectureSelected"]),(0,o.bF)(i,{selectedPrefectures:e.selectedPrefectures},null,8,["selectedPrefectures"])])}var c=r(144),s=r(232);const i={class:"prefecture-list"},l=["value","onChange"];function p(e,t,r,n,a,u){return(0,o.uX)(),(0,o.CE)("div",null,[t[0]||(t[0]=(0,o.Lk)("h2",null,"Select Prefectures",-1)),(0,o.Lk)("div",i,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.prefectures,(t=>((0,o.uX)(),(0,o.CE)("div",{class:"prefecture-item",key:t.prefCode},[(0,o.Lk)("label",null,[(0,o.Lk)("input",{type:"checkbox",value:t.prefCode,onChange:r=>e.togglePrefecture(t.prefCode)},null,40,l),(0,o.eW)(" "+(0,s.v_)(t.prefName),1)])])))),128))])])}var f=r(373);const d="ukEu3DChtA6huxcTQXfZWOnuOyePM58qq8eGL7b1",v="https://opendata.resas-portal.go.jp/api/v1/",h=async()=>{try{const e=await f.A.get(`${v}prefectures`,{headers:{"X-API-KEY":d}});return e.data.result}catch(e){throw console.error("Error fetching prefectures:",e),e}},y=async e=>{try{const t=await f.A.get(`${v}population/composition/perYear`,{headers:{"X-API-KEY":d},params:{prefCode:e}});return t.data.result.data[0].data}catch(t){throw console.error("Error fetching population data:",t),t}};var g=(0,o.pM)({name:"PrefectureList",emits:["prefectureSelected"],setup(e,{emit:t}){const r=(0,c.KR)([]),n=async()=>{try{r.value=await h()}catch(e){console.error("Failed to load prefectures")}},a=e=>{t("prefectureSelected",e)};return(0,o.sV)(n),{prefectures:r,togglePrefecture:a}}}),P=r(241);const b=(0,P.A)(g,[["render",p],["__scopeId","data-v-e46b4c24"]]);var m=b;const w={class:"population-graph"},C={key:0,class:"loading-indicator"};function O(e,t,r,n,a,u){const c=(0,o.g2)("highcharts");return(0,o.uX)(),(0,o.CE)("div",w,[e.loading?((0,o.uX)(),(0,o.CE)("div",C," Loading population data, please wait... ")):(0,o.Q3)("",!0),e.loading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(c,{key:1,options:e.chartOptions},null,8,["options"]))])}var k=(0,o.pM)({name:"PopulationGraph",props:{selectedPrefectures:{type:Array,required:!0}},setup(e){const t=(0,c.KR)({title:{text:"Population Trends by Prefecture"},xAxis:{title:{text:"Year"},type:"category"},yAxis:{title:{text:"Population"}},series:[]}),r=(0,c.KR)({}),n=(0,c.KR)(!0),a=(0,c.KR)({}),u=async()=>{n.value=!0;const e={},t=await h();t.forEach((e=>{a.value[e.prefCode]=e.prefName}));for(const r of t){const t=r.prefCode;e[t]=await y(t)}r.value=e,n.value=!1},s=async()=>{const n=[];t.value.series=[];for(const t of e.selectedPrefectures)if(r.value[t]){const e=r.value[t].map((e=>({x:e.year,y:e.value})));n.push({name:a.value[t],data:e})}t.value.series=n};return(0,o.wB)((()=>e.selectedPrefectures),(()=>{s()}),{deep:!0}),(0,o.sV)((async()=>{await u(),s()})),{chartOptions:t,loading:n}}});const x=(0,P.A)(k,[["render",O],["__scopeId","data-v-0f9da6ca"]]);var E=x,_=(0,o.pM)({name:"App",components:{PrefectureList:m,PopulationGraph:E},setup(){const e=(0,c.KR)([]),t=t=>{e.value.includes(t)?e.value=e.value.filter((e=>e!==t)):e.value.push(t)};return{selectedPrefectures:e,handlePrefectureSelected:t}}});const A=(0,P.A)(_,[["render",u]]);var S=A,L=r(129),X=r.n(L);const j=(0,n.Ef)(S);j.use(X()),j.mount("#app")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,n,o,a){if(!n){var u=1/0;for(l=0;l<e.length;l++){n=e[l][0],o=e[l][1],a=e[l][2];for(var c=!0,s=0;s<n.length;s++)(!1&a||u>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[s])}))?n.splice(s--,1):(c=!1,a<u&&(u=a));if(c){e.splice(l--,1);var i=o();void 0!==i&&(t=i)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,o,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,u=n[0],c=n[1],s=n[2],i=0;if(u.some((function(t){return 0!==e[t]}))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(s)var l=s(r)}for(t&&t(n);i<u.length;i++)a=u[i],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(l)},n=self["webpackChunkpopulation_trends_spa"]=self["webpackChunkpopulation_trends_spa"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],(function(){return r(732)}));n=r.O(n)})();
//# sourceMappingURL=app.157a4ab7.js.map